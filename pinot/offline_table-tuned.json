{
  "tableName": "hits",
  "tableType": "OFFLINE",
  "segmentsConfig": {
    "schemaName": "hits",
    "replication": "1",
    "timeColumnName": "processedEventTime",
    "timeType": "SECONDS",
    "segmentPushType": "APPEND",
    "segmentAssignmentStrategy": "BalanceNumSegmentAssignmentStrategy"
  },
  "tenants": {
    "server": "DefaultTenant",
    "broker": "DefaultTenant"
  },
  "tableIndexConfig": {
    "invertedIndexColumns": [
      "UserID",
      "CounterID",
      "AdvEngineID",
      "RegionID",
      "OS",
      "UserAgent",
      "URLCategoryID",
      "TraficSourceID",
      "SearchEngineID",
      "BrowserCountry",
      "BrowserLanguage",
      "HitColor",
      "MobilePhone",
      "IsMobile",
      "IsRefresh",
      "GoodEvent",
      "DontCountHits",
      "hasSearchPhrase",
      "hasURL",
      "hasTitle"
    ],
    "noDictionaryColumns": [
      "OriginalURL",
      "SearchPhrase",
      "Referer",
      "URL",
      "Title"
    ],
    "rangeIndexColumns": [
      "ResolutionWidth",
      "ResolutionHeight",
      "HistoryLength"
    ],
    "starTreeIndexConfigs": [
    {
      "dimensionsSplitOrder": ["RegionID", "SearchEngineID", "TraficSourceID"],
      "functionColumnPairs": [
        "AVG__ResolutionWidth"
      ],
      "maxLeafRecords": 10000
    }
  ],
    "segmentPartitionConfig": {
      "columnPartitionMap": {
        "UserID": {
          "functionName": "Murmur",
          "numPartitions": 8
        },
        "RegionID": {
          "functionName": "Murmur", 
          "numPartitions": 4
        },
        "processedEventDate": {
          "functionName": "Modulo",
          "numPartitions": 2
        }
      }
    }
  },
  "fieldConfigList":[
  {
     "name": "URL",
     "encodingType": "RAW",
     "indexes": {
        "text": {
          "caseSensitive": true
        }
    }
  },
  {
     "name":"Title",
     "encodingType": "RAW",
     "indexes": {
        "text": {
          "caseSensitive": true
        }
    }
  }
],
  "routing": {
    "segmentPrunerTypes": [
      "time",
      "partition"
    ]
  },
  "ingestionConfig": {
    "transformConfigs": [
      {
        "columnName": "processedEventTime",
        "transformFunction": "toEpochSeconds(FromDateTime(EventTime, 'yyyy-MM-dd HH:mm:ss'))"
      },
      {
        "columnName": "processedEventDate",
        "transformFunction": "toEpochDays(FromDateTime(EventDate, 'yyyy-MM-dd'))"
      },
      {
        "columnName": "hasSearchPhrase",
        "transformFunction": "Groovy({SearchPhrase != null && SearchPhrase != 'null' ? 1 : 0}, SearchPhrase)"
      },
      {
        "columnName": "hasURL",
        "transformFunction": "Groovy({URL != null && URL != 'null' ? 1 : 0}, URL)"
      },
      {
        "columnName": "hasTitle",
        "transformFunction": "Groovy({Title != null && Title != 'null' ? 1 : 0}, Title)"
      }
    ]
  }
}